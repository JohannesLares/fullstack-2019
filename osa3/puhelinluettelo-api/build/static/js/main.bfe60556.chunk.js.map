{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["url","services_persons","axios","get","concat","person","post","id","update","put","then","response","delete","Form","_ref","newName","handleChange","handleNumberChange","newNumber","handleSubmit","react_default","a","createElement","value","onChange","type","onClick","SearchBox","_ref2","oldValue","changeValue","Persons","_ref3","persons","search","doAlert","map","key","name","toLowerCase","includes","number","pers","console","log","forEach","window","confirm","dbService","resp","remove","Notification","_ref4","error","message","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setSearch","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","data","msg","setTimeout","App_Notification","App_SearchBox","event","target","App_Form","preventDefault","newPerson","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","catch","err","return","App_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.bfe60556.chunk.js","sourcesContent":["import axios from 'axios'\nconst url = 'http://localhost:3001/api'\n\nconst getPersons = () => {\n    return axios.get(`${url}/persons`)\n}\n\nconst createPerson = person => {\n    return axios.post(`${url}/newPerson`, person)\n}\n\nconst updatePerson = (id, update) => {\n    const req = axios.put(`${url}/persons/${id}`, update)\n    return req.then(response => {\n        return response\n    })\n}\n\nconst deletePerson = id => {\n    const request = axios.delete(`${url}/deletePerson/${id}`)\n    return request.then(response => {\n        return response\n    })\n}\n\nexport default {\n    getPersons: getPersons,\n    createPerson: createPerson,\n    updatePerson: updatePerson,\n    deletePerson: deletePerson\n}","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport dbService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ search, setSearch ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState({})\n\n  useEffect(() => {\n    update()\n    return;\n  },[])\n  \n  const update = () => {\n    dbService.getPersons()\n      .then(response => {\n        console.log(response)\n        setPersons(response.data)\n      })\n  }\n\n  const handleChange = event => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSubmit = event => {\n    event.preventDefault()\n    var newPerson = { name: newName, number: newNumber }\n    for(var person of persons){\n      if(newName === person.name) {\n        dbService.updatePerson(person.id,  {name: newName, number: newNumber}).then(resp => {\n          update()\n          doAlert(`Päivitettiin henkilön ${newName} numero muotoon ${newNumber}`)\n        }).catch(error => {\n          setErrorMessage({message: error.error, type: \"error\"})\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n        return;\n      }\n    }\n    console.log(newPerson)\n    dbService.createPerson(newPerson)\n      .then((response) => {\n        update()\n        setErrorMessage({message: `Lisättiin ${newName} numerolla ${newNumber}`, type: \"success\"})\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      }).catch(error => {\n        console.log(error.response.data.error)\n        setErrorMessage({message: error.response.data.error, type: \"error\"})\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n  }\n\n  const doSearch = event => {\n    setSearch(event.target.value)\n  }\n\n  const doAlert = msg => {\n    setErrorMessage({message: msg, type: \"success\"})\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n  }\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <Notification error={errorMessage} />\n      <SearchBox oldValue={search} changeValue={doSearch} />\n      <h3>Lisää uusi</h3>\n      <Form \n        newName={newName} \n        handleChange={handleChange} \n        newNumber={newNumber} \n        handleNumberChange={handleNumberChange} \n        handleSubmit={handleSubmit}\n      />\n      <h2>Numerot</h2>\n      <Persons persons={persons} search={search} doAlert={doAlert} update={update} />\n    </div>\n  )\n\n}\n\nconst Form = ({newName, handleChange, handleNumberChange, newNumber, handleSubmit}) => {\n  return(\n    <form>\n        <div>\n          nimi: <input value={newName} onChange={handleChange} />\n          numero: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\" onClick={handleSubmit} >lisää</button>\n        </div>\n      </form>\n  )\n}\n\nconst SearchBox = ({oldValue, changeValue}) => {\n  return(<p>Rajaa näytettäviä: <input value={oldValue} onChange={changeValue} /></p>)\n}\n\nconst Persons = ({persons, search, doAlert, update}) => {\n  const remove = id => {\n    var pers = {}\n    console.log(persons)\n    persons.forEach(person => {\n      if(person.id === id) pers = person\n    })\n    if(window.confirm(`Poistetaanko ${pers.name}`)){\n      dbService.deletePerson(id).then(resp => {\n        update()\n        doAlert(`Poistettiin käyttäjä ${pers.name}`)\n      })\n    }\n  }\n\n  return(\n    persons.map((person, key) => {\n      if(search === \"\" || person.name.toLowerCase().includes(search.toLowerCase()) || person.number.includes(search)){\n        return(<p key={key}>{person.name} {person.number} <button onClick={()=>remove(person.id)} >Poista</button> </p>)\n      }\n      return \"\"\n    })\n  )\n}\n\nconst Notification = ({ error }) => {\n  if(error===null || error.message === null || error.type === null) return null;\n  return(\n    <div className={error.type}>{error.message}</div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}