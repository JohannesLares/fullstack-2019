{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["url","services_persons","axios","get","concat","person","post","id","update","put","then","response","delete","Form","_ref","newName","handleChange","handleNumberChange","newNumber","handleSubmit","react_default","a","createElement","value","onChange","type","onClick","SearchBox","_ref2","oldValue","changeValue","Persons","_ref3","persons","search","doAlert","map","key","name","toLowerCase","includes","number","pers","foreach","window","confirm","dbService","remove","Notification","_ref4","error","message","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setSearch","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","console","log","data","msg","setTimeout","App_Notification","App_SearchBox","event","target","App_Form","preventDefault","copy","toConsumableArray","newPerson","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","catch","err","return","push","App_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.487fb938.chunk.js","sourcesContent":["import axios from 'axios'\nconst url = 'http://localhost:3001/api'\n\nconst getPersons = () => {\n    return axios.get(`${url}/persons`)\n}\n\nconst createPerson = person => {\n    return axios.post(`${url}/newPerson`, person)\n}\n\nconst updatePerson = (id, update) => {\n    const req = axios.put(`${url}/persons/${id}`, update)\n    return req.then(response => {\n        return response\n    })\n}\n\nconst deletePerson = id => {\n    const request = axios.delete(`${url}/deletePerson/${id}`)\n    return request.then(response => {\n        return response\n    })\n}\n\nexport default {\n    getPersons: getPersons,\n    createPerson: createPerson,\n    updatePerson: updatePerson,\n    deletePerson: deletePerson\n}","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport dbService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ search, setSearch ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState({})\n\n  useEffect(() => {\n    dbService.getPersons()\n      .then(response => {\n        console.log(response)\n        setPersons(response.data)\n      })\n    return;\n  },[])\n  \n  const handleChange = event => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSubmit = event => {\n    event.preventDefault()\n    let copy = [...persons]\n    var newPerson = { name: newName, number: newNumber }\n    for(var person of persons){\n      if(newName === person.name) {\n        dbService.updatePerson(person.id,  {name: newName, number: newNumber}).then(\n          doAlert(`Päivitettiin henkilön ${newName} numero muotoon ${newNumber}`)\n        ).catch(error => {\n          setErrorMessage({message: `Jotain meni vikaan`, type: \"error\"})\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n        return;\n      }\n    }\n    copy.push(newPerson)\n    setPersons(copy)\n    console.log(newPerson)\n    dbService.createPerson(newPerson)\n      .then((response) => {\n        setErrorMessage({message: `Lisättiin ${newName} numerolla ${newNumber}`, type: \"success\"})\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n  }\n\n  const doSearch = event => {\n    setSearch(event.target.value)\n  }\n\n  const doAlert = msg => {\n    setErrorMessage({message: msg, type: \"success\"})\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n  }\n\n  return (\n    <div>\n      <h2>Puhelinluettelo</h2>\n      <Notification error={errorMessage} />\n      <SearchBox oldValue={search} changeValue={doSearch} />\n      <h3>Lisää uusi</h3>\n      <Form \n        newName={newName} \n        handleChange={handleChange} \n        newNumber={newNumber} \n        handleNumberChange={handleNumberChange} \n        handleSubmit={handleSubmit}\n      />\n      <h2>Numerot</h2>\n      <Persons persons={persons} search={search} doAlert={doAlert} />\n    </div>\n  )\n\n}\n\nconst Form = ({newName, handleChange, handleNumberChange, newNumber, handleSubmit}) => {\n  return(\n    <form>\n        <div>\n          nimi: <input value={newName} onChange={handleChange} />\n          numero: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\" onClick={handleSubmit} >lisää</button>\n        </div>\n      </form>\n  )\n}\n\nconst SearchBox = ({oldValue, changeValue}) => {\n  return(<p>Rajaa näytettäviä: <input value={oldValue} onChange={changeValue} /></p>)\n}\n\nconst Persons = ({persons, search, doAlert}) => {\n  const remove = id => {\n    var pers = {}\n    persons.foreach(person => {\n      if(person.id === id) pers = person\n    })\n    if(window.confirm(`Poistetaanko ${pers.name}`)){\n      dbService.deletePerson(id)\n      doAlert(`Poistettiin käyttäjä ${pers.name}`)\n    }\n  }\n\n  return(\n    persons.map((person, key) => {\n      if(search === \"\" || person.name.toLowerCase().includes(search.toLowerCase()) || person.number.includes(search)){\n        return(<p key={key}>{person.name} {person.number} <button onClick={()=>remove(person.id)} >Poista</button> </p>)\n      }\n      return \"\"\n    })\n  )\n}\n\nconst Notification = ({ error }) => {\n  if(error===null || error.message === null || error.type === null) return null;\n  return(\n    <div className={error.type}>{error.message}</div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}